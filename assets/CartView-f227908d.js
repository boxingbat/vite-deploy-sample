import{_ as b,o as l,c as a,a as c,d as t,F as u,f as _,g as m,t as o,n as y,h as v,v as C}from"./index-ed237d42.js";const{VITE_APP_URL:h,VITE_APP_PATH:p}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"boxingbat",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},f={data(){return{products:[],productId:"",cart:{},loadingItem:"",product:{},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCarts(){this.$http.get(`${h}/v2/api/${p}/cart`).then(s=>{console.log("Cart :",s.data),this.cart=s.data.data})},updateCartItem(s){const i={product_id:"item.product.id",qty:s.qty};this.loadingItem=s.id,this.$http.put(`${h}/v2/api/${p}/cart/${s.id}`,{data:i}).then(r=>{console.log("Update Cart :",r.data),this.getCarts(),this.loadingItem=" "})},deleteCartItem(s){const i={product_id:"item.product.id",qty:s.qty};console.log(i,s.id),this.$http.delete(`${h}/v2/api/${p}/cart/${s.id}`).then(r=>{console.log("delete Cart :",r.data),this.getCarts()})}},mounted(){this.getCarts()}},x={class:"table align-middle"},k=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),I={style:{width:"200px"}},P={key:0,class:"h5"},V={key:1},$={class:"h6"},E={class:"h5"},T={class:"btn-group btn-group-sm"},A=["onClick"],U=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),q=["onClick"],D=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),w=t("div",{class:"text-end"},[t("button",{class:"btn btn-outline-danger",type:"button"},"清空購物車")],-1),B={class:"table align-middle"},L=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),R=["disabled","onClick"],S=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),M=t("div",{class:"text-success"}," 已套用優惠券 ",-1),N={class:"input-group input-group-sm"},z={class:"input-group mb-3"},F=["onUpdate:modelValue","disabled","onChange"],H=["value"],O={class:"text-end"},j=t("small",{class:"text-success"},"折扣價：",-1),G=t("td",{colspan:"3",class:"text-end"},"總計",-1),J={class:"text-end"},K=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),Q={class:"text-end text-success"};function W(s,i,r,X,d,g){return l(),a(u,null,[c(" 購物車 "),t("table",x,[k,t("tbody",null,[(l(!0),a(u,null,_(d.products,e=>(l(),a("tr",{key:e.id},[t("td",I,[t("div",{style:y([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",null,o(),1),t("td",null,[e.price===e.origin_price?(l(),a("div",P,o(e.price)+" 元",1)):(l(),a("div",V,[t("del",$,"原價 "+o(e.origin_price)+" 元",1),t("div",E,"現在只要 "+o(e.price)+" 元",1)]))]),t("td",null,[t("div",T,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:n=>s.openModal(e.id)},[U,c(" 查看更多 ")],8,A),t("button",{type:"button",class:"btn btn-outline-danger",onClick:n=>s.addToCart(e.id,1)},[D,c(" 加到購物車 ")],8,q)])])]))),128))])]),w,t("table",B,[L,t("tbody",null,[d.cart.carts?(l(!0),a(u,{key:0},_(d.cart.carts,e=>(l(),a("tr",{key:e.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:e.id===d.loadingItem,onClick:n=>g.deleteCartItem(e)},[S,c(" x ")],8,R)]),t("td",null,[c(o(e.product.title)+" ",1),M]),t("td",null,[t("div",N,[t("div",z,[v(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":n=>e.qty=n,disabled:e.id===d.loadingItem,onChange:n=>g.updateCartItem(e)},[(l(),a(u,null,_(20,n=>t("option",{value:n,key:n+"1234578"},o(n),9,H)),64))],40,F),[[C,e.qty]])])])]),t("td",O,[j,c(" "+o(e.total),1)])]))),128)):m("",!0)]),t("tfoot",null,[t("tr",null,[G,t("td",J,o(d.cart.total),1)]),t("tr",null,[K,t("td",Q,o(d.cart.final_total),1)])])])],64)}const Z=b(f,[["render",W]]);export{Z as default};
