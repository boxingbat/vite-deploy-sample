import{_ as b,o as l,c as a,a as t,F as u,f as _,h as m,t as o,n as v,e as i,k as y,v as C}from"./index-6557581e.js";const{VITE_APP_URL:h,VITE_APP_PATH:p}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"boxingbat",BASE_URL:"/vite-deploy-sample/",MODE:"production",DEV:!1,PROD:!0},f={data(){return{products:[],productId:"",cart:{},loadingItem:"",product:{},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCarts(){this.$http.get(`${h}/v2/api/${p}/cart`).then(s=>{console.log("Cart :",s.data),this.cart=s.data.data})},updateCartItem(s){const c={product_id:"item.product.id",qty:s.qty};this.loadingItem=s.id,this.$http.put(`${h}/v2/api/${p}/cart/${s.id}`,{data:c}).then(r=>{console.log("Update Cart :",r.data),this.getCarts(),this.loadingItem=" "})},deleteCartItem(s){const c={product_id:"item.product.id",qty:s.qty};console.log(c,s.id),this.$http.delete(`${h}/v2/api/${p}/cart/${s.id}`).then(r=>{console.log("delete Cart :",r.data),this.getCarts()})}},mounted(){this.getCarts()}},k={class:"container"},x=t("p",null,"購物車",-1),I={class:"table align-middle"},P=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),V={style:{width:"200px"}},$={key:0,class:"h5"},E={key:1},T={class:"h6"},A={class:"h5"},U={class:"btn-group btn-group-sm"},q=["onClick"],D=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),w=["onClick"],B=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),L=t("div",{class:"text-end"},[t("button",{class:"btn btn-outline-danger",type:"button"},"清空購物車")],-1),R={class:"table align-middle"},S=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),M=["disabled","onClick"],N=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),z=t("div",{class:"text-success"}," 已套用優惠券 ",-1),F={class:"input-group input-group-sm"},H={class:"input-group mb-3"},O=["onUpdate:modelValue","disabled","onChange"],j=["value"],G={class:"text-end"},J=t("small",{class:"text-success"},"折扣價：",-1),K=t("td",{colspan:"3",class:"text-end"},"總計",-1),Q={class:"text-end"},W=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),X={class:"text-end text-success"};function Y(s,c,r,Z,d,g){return l(),a("div",null,[t("div",k,[x,t("table",I,[P,t("tbody",null,[(l(!0),a(u,null,_(d.products,e=>(l(),a("tr",{key:e.id},[t("td",V,[t("div",{style:v([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",null,o(),1),t("td",null,[e.price===e.origin_price?(l(),a("div",$,o(e.price)+" 元",1)):(l(),a("div",E,[t("del",T,"原價 "+o(e.origin_price)+" 元",1),t("div",A,"現在只要 "+o(e.price)+" 元",1)]))]),t("td",null,[t("div",U,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:n=>s.openModal(e.id)},[D,i(" 查看更多 ")],8,q),t("button",{type:"button",class:"btn btn-outline-danger",onClick:n=>s.addToCart(e.id,1)},[B,i(" 加到購物車 ")],8,w)])])]))),128))])]),L,t("table",R,[S,t("tbody",null,[d.cart.carts?(l(!0),a(u,{key:0},_(d.cart.carts,e=>(l(),a("tr",{key:e.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:e.id===d.loadingItem,onClick:n=>g.deleteCartItem(e)},[N,i(" x ")],8,M)]),t("td",null,[i(o(e.product.title)+" ",1),z]),t("td",null,[t("div",F,[t("div",H,[y(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":n=>e.qty=n,disabled:e.id===d.loadingItem,onChange:n=>g.updateCartItem(e)},[(l(),a(u,null,_(20,n=>t("option",{value:n,key:n+"1234578"},o(n),9,j)),64))],40,O),[[C,e.qty]])])])]),t("td",G,[J,i(" "+o(e.total),1)])]))),128)):m("",!0)]),t("tfoot",null,[t("tr",null,[K,t("td",Q,o(d.cart.total),1)]),t("tr",null,[W,t("td",X,o(d.cart.final_total),1)])])])])])}const et=b(f,[["render",Y]]);export{et as default};
